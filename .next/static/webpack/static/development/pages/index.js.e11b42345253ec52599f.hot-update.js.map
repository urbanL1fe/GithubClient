{"version":3,"file":"static/webpack/static\\development\\pages\\index.js.e11b42345253ec52599f.hot-update.js","sources":["webpack:///./components/Reposlist.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport Repo from \"./Repo\";\r\nimport Loader from \"./Loader\";\r\nimport useGithubReposFetcher from '../hooks/useGithubReposFetcher';\r\nimport { debounced } from '../helperFuncs';\r\n\r\nconst ReposList = props => {\r\n  const { user } = props;\r\n  const [page, setPage] = useState(1);\r\n\r\n  const { isLoading, data, doFetch } = useGithubReposFetcher(user, page);\r\n\r\n  useEffect(() => {\r\n    const debouncedScroll = debounced(600, handleScroll);\r\n\r\n    function getUserParentScroll(user) {\r\n      const ourUser = document.getElementById(user);\r\n      if (ourUser) {\r\n        ourUser.parentNode.addEventListener('scroll', debouncedScroll);\r\n      }\r\n    }\r\n\r\n    getUserParentScroll(user);\r\n    return () => document.getElementById(user).parentNode.removeEventListener('scroll', debouncedScroll);\r\n  }, [handleScroll, user]);\r\n\r\n  function handleScroll(e) {\r\n    // if( e.target.offsetHeight + e.target.scrollTop !== e.target.scrollHeight) return;\r\n    if (e.target.scrollTop >= e.target.scrollHeight - e.target.offsetHeight) {\r\n      console.log('bottom');\r\n      setPage(page + 1);\r\n      doFetch(\r\n        `https://api.github.com/users/${user}/repos?sort=updated&type=owner&direction=desc&page=${page}&per_page=10`\r\n      );\r\n      console.log(page);\r\n      console.log(user);\r\n    }\r\n  }\r\n\r\n  if (!data) {\r\n    return <Loader />;\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <ul id={user} className=\"repoList\">\r\n        {Object.keys(data).map(repo => {\r\n          const myRepo = data[repo];\r\n          const { license, id, full_name, description, stargazers_count, watchers_count, forks_count } = myRepo;\r\n          return (\r\n            <Repo\r\n              key={id}\r\n              id={id}\r\n              name={full_name}\r\n              description={description || `No Desciption`}\r\n              license={license && license.name ? license.name : `No License`}\r\n              stars={stargazers_count || `0`}\r\n              watchers={watchers_count || `0`}\r\n              forks={forks_count || `0`}\r\n            />\r\n          );\r\n        })}\r\n        {isLoading ? <Loader /> : ``}\r\n      </ul>\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default ReposList;\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AACA;;;;A","sourceRoot":""}